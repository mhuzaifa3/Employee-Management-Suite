{% extends "base.html" %}
{% block content %}
<form class="row gy-2 gx-2 mb-3">
  <div class="col-auto">
    <input class="form-control" name="q" placeholder="Search name or phone" value="{{ q or '' }}">
  </div>
  <div class="col-auto">
    <button class="btn btn-outline-primary">Search</button>
    <a class="btn btn-outline-secondary" href="{{ url_for('employees.index') }}">Reset</a>
    <a class="btn btn-primary ms-2" href="{{ url_for('employees.new') }}">Add</a>
  </div>
</form>

<table class="table table-striped align-middle">
  <thead><tr><th>ID</th><th>Name</th><th>Phone</th><th>Salary</th><th class="text-end">Actions</th></tr></thead>
  <tbody>
  {% for e in pagination.items %}
    <tr>
      <td>{{ e.id }}</td>
      <td>{{ e.name }}</td>
      <td>{{ e.phone }}</td>
      <td>{{ '%.2f'|format(e.salary or 0) }}</td>
      <td class="text-end">
        <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('employees.edit', emp_id=e.id) }}">Edit</a>
        <form method="post" action="{{ url_for('employees.destroy', emp_id=e.id) }}" style="display:inline">
          <button class="btn btn-sm btn-outline-danger">Delete</button>
        </form>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<nav>
  <ul class="pagination">
    <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
      <a class="page-link" href="{{ url_for('employees.index', q=q, page=pagination.prev_num) }}">Prev</a>
    </li>
    <li class="page-item disabled"><span class="page-link">Page {{ pagination.page }} / {{ pagination.pages or 1 }}</span></li>
    <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
      <a class="page-link" href="{{ url_for('employees.index', q=q, page=pagination.next_num) }}">Next</a>
    </li>
  </ul>
</nav>
{% endblock %}